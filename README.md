# SphereAgent - Android Remote Control Agent

Enterprise-grade Android agent –¥–ª—è —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏

![Android](https://img.shields.io/badge/Android-26+-green)
![Kotlin](https://img.shields.io/badge/Kotlin-2.0-purple)
![Compose](https://img.shields.io/badge/Jetpack_Compose-2024.04-blue)
![Version](https://img.shields.io/badge/Version-1.7.0-orange)

## üÜï –ß—Ç–æ –Ω–æ–≤–æ–≥–æ –≤ v1.7.0 (Fleet Management Update)

- **üîÑ Auto-Update System** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤, —Ñ–æ–Ω–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ APK, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
- **üåê Web Accessibility Controls** - –£–¥–∞–ª—ë–Ω–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ Accessibility –ø—Ä—è–º–æ –∏–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- **üöÄ Boot Auto-Start** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –∞–≥–µ–Ω—Ç–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- **‚öôÔ∏è Fleet Management** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 500+ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏: –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞
- **üìä Enhanced Diagnostics** - –°—Ç–∞—Ç—É—Å—ã accessibility/root –≤ API –∏ UI –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ control issues

## üÜï –ß—Ç–æ –Ω–æ–≤–æ–≥–æ –≤ v1.6.0 (Enterprise Stream Control)

- **üì∫ Live Stream Start/Stop** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∑–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç—Ä–∏–º–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º —Å–µ—Ä–≤–µ—Ä–∞
- **üß© –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –∫–æ–º–∞–Ω–¥** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ `{type, command_id, params}`
- **üñ± –ü–æ–ª–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - tap, swipe/drag, long-press
- **‚ôø Non-root —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - fallback –Ω–∞ Accessibility –¥–ª—è –∂–µ—Å—Ç–æ–≤ –∏ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫
- **üõ°Ô∏è –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è** - stop_stream –±–æ–ª—å—à–µ –Ω–µ —Ä–≤—ë—Ç –æ—Å–Ω–æ–≤–Ω–æ–π WebSocket

## üÜï –ß—Ç–æ –Ω–æ–≤–æ–≥–æ –≤ v1.5.5

- **üîç Zero-Config Auto-Discovery** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ (mDNS/NSD)
- **üåê Network Scanning** - –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Å–µ—Ç–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞ SphereADB —Å–µ—Ä–≤–µ—Ä–∞
- **üîÑ Smart Fallback** - Remote Config ‚Üí mDNS ‚Üí Network Scan ‚Üí Hardcoded URLs
- **üöá Tuna Tunnel Support** - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–±–æ—Ç—ã —á–µ—Ä–µ–∑ –ø—É–±–ª–∏—á–Ω—ã–µ —Ç—É–Ω–Ω–µ–ª–∏
- **üõ† Dependency Injection** - –ù–æ–≤—ã–π NetworkModule –¥–ª—è —á–∏—Å—Ç–æ–≥–æ –∫–æ–¥–∞

## üì± –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### Core Features
- **üì∫ Real-time Screen Streaming** - –¢—Ä–∞–Ω—Å–ª—è—Ü–∏—è —ç–∫—Ä–∞–Ω–∞ —á–µ—Ä–µ–∑ WebSocket (JPEG binary frames)
- **üéÆ Remote Control** - Tap, Swipe, Long-press, Key events, Shell commands
- **üîÑ Auto-Reconnect** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å exponential backoff
- **üåê Fallback Servers** - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ –¥–ª—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏
- **‚öôÔ∏è Remote Config** - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å —Å–µ—Ä–≤–µ—Ä–∞
- **üîí Secure Connection** - WSS/HTTPS —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π

### Fleet Management (v1.7.0+)
- **üîÑ OTA Updates** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ APK –±–µ–∑ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ (–ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 6—á)
- **üåê Web Controls** - –£–¥–∞–ª—ë–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **üöÄ Auto-Start** - –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞/—ç–º—É–ª—è—Ç–æ—Ä–∞
- **üìä Fleet Monitoring** - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–µ—Ä—Å–∏–π, —Å—Ç–∞—Ç—É—Å–æ–≤, accessibility –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è |
|-----------|------------|
| Language | Kotlin 2.0.21 |
| UI | Jetpack Compose (Material 3) |
| DI | Hilt 2.52 |
| Network | OkHttp 4.12 + WebSocket |
| Persistence | DataStore 1.1.1 |
| Serialization | Kotlinx Serialization |
| Screen Capture | MediaProjection API |
| Input | Accessibility Service / Shell |

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
app/src/main/java/com/sphere/agent/
‚îú‚îÄ‚îÄ SphereAgentApp.kt          # Application class
‚îú‚îÄ‚îÄ MainActivity.kt            # Main Activity
‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îî‚îÄ‚îÄ AgentConfig.kt         # Remote config management
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ SettingsRepository.kt  # DataStore repository
‚îú‚îÄ‚îÄ di/
‚îÇ   ‚îî‚îÄ‚îÄ AppModule.kt           # Hilt modules
‚îú‚îÄ‚îÄ network/
‚îÇ   ‚îî‚îÄ‚îÄ ConnectionManager.kt   # WebSocket connection
‚îú‚îÄ‚îÄ service/
‚îÇ   ‚îú‚îÄ‚îÄ ScreenCaptureService.kt    # Foreground service
‚îÇ   ‚îú‚îÄ‚îÄ CommandExecutor.kt         # Shell commands
‚îÇ   ‚îî‚îÄ‚îÄ SphereAccessibilityService.kt  # Non-root input
‚îî‚îÄ‚îÄ ui/
    ‚îú‚îÄ‚îÄ screens/
    ‚îÇ   ‚îî‚îÄ‚îÄ MainScreen.kt      # Main UI
    ‚îú‚îÄ‚îÄ theme/
    ‚îÇ   ‚îú‚îÄ‚îÄ Theme.kt           # Material 3 theme
    ‚îÇ   ‚îî‚îÄ‚îÄ Typography.kt      # Typography
    ‚îî‚îÄ‚îÄ viewmodel/
        ‚îî‚îÄ‚îÄ MainViewModel.kt   # State management
```

## üöÄ –°–±–æ—Ä–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Android Studio Ladybug (2024.2+)
- JDK 17+
- Android SDK 35

### –ö–æ–º–∞–Ω–¥—ã

```bash
# Build debug APK
./gradlew assembleDebug

# Build release APK
./gradlew assembleRelease

# APK location
app/build/outputs/apk/release/sphere-agent-release.apk
```

## üì° WebSocket Protocol

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```
wss://server.com/api/v1/agent/ws/{device_token}
```

### –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –∞–≥–µ–Ω—Ç–∞

```json
{
  "type": "hello",
  "device_id": "uuid",
  "device_name": "Samsung Galaxy S24",
  "device_model": "SM-S921B",
  "android_version": "14",
  "agent_version": "1.0.0",
  "capabilities": ["screen_capture", "touch", "swipe", "key_event", "shell"]
}
```

### –ö–æ–º–∞–Ω–¥—ã –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞

```json
{ "type": "tap", "command_id": "cmd-1", "x": 500, "y": 800 }
{ "type": "swipe", "command_id": "cmd-2", "x": 500, "y": 1200, "x2": 500, "y2": 400, "duration": 300 }
{ "type": "key", "command_id": "cmd-3", "keyCode": 4 }
{ "type": "shell", "command_id": "cmd-4", "command": "pm list packages" }
{ "type": "home" }
{ "type": "back" }
```

### Binary Frames

–≠–∫—Ä–∞–Ω –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∫–∞–∫ binary WebSocket frames (JPEG data) - –±–µ–∑ base64!

## üîê Permissions

```xml
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.FOREGROUND_SERVICE" />
<uses-permission android:name="android.permission.FOREGROUND_SERVICE_MEDIA_PROJECTION" />
<uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW" />
```

## üìä Performance

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| FPS | 15-30 |
| Latency | 50-150ms |
| Bandwidth | 0.5-2 Mbps |
| CPU Usage | 5-15% |
| Memory | ~50 MB |

## üìã –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----------|----------|
| `tap` | `x`, `y` | –¢–∞–ø –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º |
| `swipe` | `x1`, `y1`, `x2`, `y2`, `duration` | –°–≤–∞–π–ø |
| `long_press` | `x`, `y`, `duration` | –î–æ–ª–≥–æ–µ –Ω–∞–∂–∞—Ç–∏–µ |
| `key` | `keycode` | –ù–∞–∂–∞—Ç–∏–µ –∫–ª–∞–≤–∏—à–∏ |
| `text` | `text` | –í–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ |
| `shell` | `command` | Shell –∫–æ–º–∞–Ω–¥–∞ |
| `home` | - | –ö–Ω–æ–ø–∫–∞ Home |
| `back` | - | –ö–Ω–æ–ø–∫–∞ Back |
| `recent` | - | Recent Apps |

---

**SphereAgent** - —á–∞—Å—Ç—å —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã **SphereADB** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Android —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏.
