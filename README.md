# SphereAgent - Android Remote Control Agent

Enterprise-grade Android agent Ğ´Ğ»Ñ ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½Ğ½Ğ¾Ğ³Ğ¾ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°Ğ¼Ğ¸

![Android](https://img.shields.io/badge/Android-26+-green)
![Kotlin](https://img.shields.io/badge/Kotlin-2.0-purple)
![Compose](https://img.shields.io/badge/Jetpack_Compose-2024.04-blue)
![Version](https://img.shields.io/badge/Version-1.0.5-orange)

## ğŸ†• Ğ§Ñ‚Ğ¾ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ² v1.0.5 (Global Access)

- **ğŸŒ Global Tunnel Access** - Ğ“Ğ°Ñ€Ğ°Ğ½Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğ¸Ğ· Ğ»ÑĞ±Ğ¾Ğ¹ Ñ‚Ğ¾Ñ‡ĞºĞ¸ Ğ¼Ğ¸Ñ€Ğ° Ñ‡ĞµÑ€ĞµĞ· `sphere-api.ru.tuna.am`
- **ğŸ”„ Smart Fallback** - ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¼ IP Ğ¸ Ğ¿ÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¼ Ñ‚ÑƒĞ½Ğ½ĞµĞ»ĞµĞ¼
- **ğŸ›¡ï¸ Connection Reliability** - Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ½Ğ°Ñ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ğ¿ĞµÑ€ĞµĞ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ğ¿Ñ€Ğ¸ ÑĞ¼ĞµĞ½Ğµ ÑĞµÑ‚Ğ¸
- **ğŸ” Zero-Config** - ĞŸĞ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ¿Ñ€Ğ¸ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¼ Ğ·Ğ°Ğ¿ÑƒÑĞºĞµ

## ğŸ†• Ğ§Ñ‚Ğ¾ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ² v1.0.4 (Zero-Config)

- **ğŸ” Zero-Config Auto-Discovery** - ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº ÑĞµÑ€Ğ²ĞµÑ€Ğ° Ğ² Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ ÑĞµÑ‚Ğ¸ (mDNS/NSD)
- **ğŸŒ Network Scanning** - Ğ¡ĞºĞ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾Ğ´ÑĞµÑ‚Ğ¸ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ° SphereADB ÑĞµÑ€Ğ²ĞµÑ€Ğ°
- **ğŸ”„ Smart Fallback** - Remote Config â†’ mDNS â†’ Network Scan â†’ Hardcoded URLs
- **ğŸš‡ Tuna Tunnel Support** - ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ‡ĞµÑ€ĞµĞ· Ğ¿ÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ñ‚ÑƒĞ½Ğ½ĞµĞ»Ğ¸ (sphere-web.ru.tuna.am)
- **ğŸ›  Dependency Injection** - ĞĞ¾Ğ²Ñ‹Ğ¹ NetworkModule Ğ´Ğ»Ñ Ñ‡Ğ¸ÑÑ‚Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ´Ğ°

## ğŸ“± Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸

- **ğŸ“º Real-time Screen Streaming** - Ğ¢Ñ€Ğ°Ğ½ÑĞ»ÑÑ†Ğ¸Ñ ÑĞºÑ€Ğ°Ğ½Ğ° Ñ‡ĞµÑ€ĞµĞ· WebSocket (JPEG binary frames)
- **ğŸ® Remote Control** - Tap, Swipe, Key events, Shell commands
- **ğŸ”„ Auto-Reconnect** - ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¿ĞµÑ€ĞµĞ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ñ exponential backoff
- **ğŸŒ Fallback Servers** - ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¸Ñ… ÑĞµÑ€Ğ²ĞµÑ€Ğ¾Ğ² Ğ´Ğ»Ñ Ğ¾Ñ‚ĞºĞ°Ğ·Ğ¾ÑƒÑÑ‚Ğ¾Ğ¹Ñ‡Ğ¸Ğ²Ğ¾ÑÑ‚Ğ¸
- **âš™ï¸ Remote Config** - Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ñ ÑĞµÑ€Ğ²ĞµÑ€Ğ°
- **ğŸ”’ Secure Connection** - WSS/HTTPS Ñ Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸ĞµĞ¹

## ğŸ›  Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ |
|-----------|------------|
| Language | Kotlin 2.0.21 |
| UI | Jetpack Compose (Material 3) |
| DI | Hilt 2.52 |
| Network | OkHttp 4.12 + WebSocket |
| Persistence | DataStore 1.1.1 |
| Serialization | Kotlinx Serialization |
| Screen Capture | MediaProjection API |
| Input | Accessibility Service / Shell |

## ğŸ“¦ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
app/src/main/java/com/sphere/agent/
â”œâ”€â”€ SphereAgentApp.kt          # Application class
â”œâ”€â”€ MainActivity.kt            # Main Activity
â”œâ”€â”€ core/
â”‚   â””â”€â”€ AgentConfig.kt         # Remote config management
â”œâ”€â”€ data/
â”‚   â””â”€â”€ SettingsRepository.kt  # DataStore repository
â”œâ”€â”€ di/
â”‚   â””â”€â”€ AppModule.kt           # Hilt modules
â”œâ”€â”€ network/
â”‚   â””â”€â”€ ConnectionManager.kt   # WebSocket connection
â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ ScreenCaptureService.kt    # Foreground service
â”‚   â”œâ”€â”€ CommandExecutor.kt         # Shell commands
â”‚   â””â”€â”€ SphereAccessibilityService.kt  # Non-root input
â””â”€â”€ ui/
    â”œâ”€â”€ screens/
    â”‚   â””â”€â”€ MainScreen.kt      # Main UI
    â”œâ”€â”€ theme/
    â”‚   â”œâ”€â”€ Theme.kt           # Material 3 theme
    â”‚   â””â”€â”€ Typography.kt      # Typography
    â””â”€â”€ viewmodel/
        â””â”€â”€ MainViewModel.kt   # State management
```

## ğŸš€ Ğ¡Ğ±Ğ¾Ñ€ĞºĞ°

### Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

- Android Studio Ladybug (2024.2+)
- JDK 17+
- Android SDK 35

### ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹

```bash
# Build debug APK
./gradlew assembleDebug

# Build release APK
./gradlew assembleRelease

# APK location
app/build/outputs/apk/release/sphere-agent-release.apk
```

## ğŸ“¡ WebSocket Protocol

### ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ

```
wss://server.com/api/v1/agent/ws/{device_token}
```

### Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ¾Ñ‚ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°

```json
{
  "type": "hello",
  "device_id": "uuid",
  "device_name": "Samsung Galaxy S24",
  "device_model": "SM-S921B",
  "android_version": "14",
  "agent_version": "1.0.0",
  "capabilities": ["screen_capture", "touch", "swipe", "key_event", "shell"]
}
```

### ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ Ğ¾Ñ‚ ÑĞµÑ€Ğ²ĞµÑ€Ğ°

```json
{ "type": "tap", "command_id": "cmd-1", "x": 500, "y": 800 }
{ "type": "swipe", "command_id": "cmd-2", "x": 500, "y": 1200, "x2": 500, "y2": 400, "duration": 300 }
{ "type": "key", "command_id": "cmd-3", "keyCode": 4 }
{ "type": "shell", "command_id": "cmd-4", "command": "pm list packages" }
{ "type": "home" }
{ "type": "back" }
```

### Binary Frames

Ğ­ĞºÑ€Ğ°Ğ½ Ğ¿ĞµÑ€ĞµĞ´Ğ°Ñ‘Ñ‚ÑÑ ĞºĞ°Ğº binary WebSocket frames (JPEG data) - Ğ±ĞµĞ· base64!

## ğŸ” Permissions

```xml
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.FOREGROUND_SERVICE" />
<uses-permission android:name="android.permission.FOREGROUND_SERVICE_MEDIA_PROJECTION" />
<uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW" />
```

## ğŸ“Š Performance

| ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ° | Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|---------|----------|
| FPS | 15-30 |
| Latency | 50-150ms |
| Bandwidth | 0.5-2 Mbps |
| CPU Usage | 5-15% |
| Memory | ~50 MB |

## ğŸ“‹ ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹

| ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° | ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|---------|-----------|----------|
| `tap` | `x`, `y` | Ğ¢Ğ°Ğ¿ Ğ¿Ğ¾ ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ğ°Ğ¼ |
| `swipe` | `x1`, `y1`, `x2`, `y2`, `duration` | Ğ¡Ğ²Ğ°Ğ¹Ğ¿ |
| `long_press` | `x`, `y`, `duration` | Ğ”Ğ¾Ğ»Ğ³Ğ¾Ğµ Ğ½Ğ°Ğ¶Ğ°Ñ‚Ğ¸Ğµ |
| `key` | `keycode` | ĞĞ°Ğ¶Ğ°Ñ‚Ğ¸Ğµ ĞºĞ»Ğ°Ğ²Ğ¸ÑˆĞ¸ |
| `text` | `text` | Ğ’Ğ²Ğ¾Ğ´ Ñ‚ĞµĞºÑÑ‚Ğ° |
| `shell` | `command` | Shell ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° |
| `home` | - | ĞšĞ½Ğ¾Ğ¿ĞºĞ° Home |
| `back` | - | ĞšĞ½Ğ¾Ğ¿ĞºĞ° Back |
| `recent` | - | Recent Apps |

---

**SphereAgent** - Ñ‡Ğ°ÑÑ‚ÑŒ ÑĞºĞ¾ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ **SphereADB** Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Android ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°Ğ¼Ğ¸.
